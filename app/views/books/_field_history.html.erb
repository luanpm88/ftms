<% if !drafts.empty? %>
  <i class="icon icon-time contact-field-history" rel="history-<%= type %>" onclick="$('.history-<%= type %>').toggle()"></i>
  <ul class="history-list history-<%= type %>" style="display: none">
    <% drafts.each do |c| %>
      
      <% if ["name","publisher"].include?(type) %>
        <li><%= c[type].empty? ? "[empty]" : c[type] %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
      
      <% if ["course_type"].include?(type) %>
        <li><%= c.course_types.empty? ? "[empty]" : c.course_types.map(&:name).join(", ") %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
      
      <% if ["subject"].include?(type) %>
        <li><%= c.subjects.empty? ? "[empty]" : c.subjects.map(&:name).join(", ") %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
      
      <% if ["book_price"].include?(type) %>
        <li><%= (c.prices.map{|p| format_price(p)}).join(" / ") %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
      
      <% if ["stock_type_id"].include?(type) %>
        <li><%= c.stock_type.name %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
      
      <% if ["valid_from","valid_to"].include?(type) %>
        <li><%= c[type].strftime("%d-%b-%Y") %> <span class="nowrap time-span"><%= c.created_at.strftime("%d-%b-%Y, %I:%M %p") %>, by <%= c.user.name %></span></li>
      <% end %>
    <% end %>
  </ul>
<% end %>